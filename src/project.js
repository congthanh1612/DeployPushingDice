window.__require=function t(e,i,n){function o(c,r){if(!i[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var l="function"==typeof __require&&__require;if(!r&&l)return l(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+c+"'")}}var u=i[c]={exports:{}};e[c][0].call(u.exports,function(t){return o(e[c][1][t]||t)},u,u.exports,t,e,i,n)}return i[c].exports}for(var s="function"==typeof __require&&__require,c=0;c<n.length;c++)o(n[c]);return o}({1:[function(t,e,i){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(t){return"function"==typeof t}function s(t){return"number"==typeof t}function c(t){return"object"==typeof t&&null!==t}function r(t){return void 0===t}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!s(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,i,n,s,a,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||c(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var u=new Error('Uncaught, unspecified "error" event. ('+e+")");throw u.context=e,u}if(r(i=this._events[t]))return!1;if(o(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),i.apply(this,s)}else if(c(i))for(s=Array.prototype.slice.call(arguments,1),n=(l=i.slice()).length,a=0;a<n;a++)l[a].apply(this,s);return!0},n.prototype.addListener=function(t,e){var i;if(!o(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,o(e.listener)?e.listener:e),this._events[t]?c(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,c(this._events[t])&&!this._events[t].warned&&(i=r(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){if(!o(e))throw TypeError("listener must be a function");var i=!1;function n(){this.removeListener(t,n),i||(i=!0,e.apply(this,arguments))}return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var i,n,s,r;if(!o(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(s=(i=this._events[t]).length,n=-1,i===e||o(i.listener)&&i.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(c(i)){for(r=s;r-- >0;)if(i[r]===e||i[r].listener&&i[r].listener===e){n=r;break}if(n<0)return this;1===i.length?(i.length=0,delete this._events[t]):i.splice(n,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(o(i=this._events[t]))this.removeListener(t,i);else if(i)for(;i.length;)this.removeListener(t,i[i.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?o(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(o(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},{}],2:[function(t,e,i){i.endianness=function(){return"LE"},i.hostname=function(){return"undefined"!=typeof location?location.hostname:""},i.loadavg=function(){return[]},i.uptime=function(){return 0},i.freemem=function(){return Number.MAX_VALUE},i.totalmem=function(){return Number.MAX_VALUE},i.cpus=function(){return[]},i.type=function(){return"Browser"},i.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},i.networkInterfaces=i.getNetworkInterfaces=function(){return{}},i.arch=function(){return"javascript"},i.platform=function(){return"browser"},i.tmpdir=i.tmpDir=function(){return"/tmp"},i.EOL="\n"},{}],BtnDirection:[function(t,e,i){"use strict";cc._RF.push(e,"26fe7EoWvxAX5jTv1SwstBO","BtnDirection");var n=t("./otherProcessing.js"),o=1,s=2,c=3,r=4;cc.Class({extends:cc.Component,properties:{btnLeft:cc.Node,btnRight:cc.Node,btnUp:cc.Node,btnDown:cc.Node},onLoad:function(){this.node.on("UPDATE_BTN_CONTROLLER",this.updateBtnController,this),this.node.on("UPDATE_DICE_NUMBER",this.updateDiceNumber,this),this.node.on("UPDATE_DICE_COLOR",this.updateColorBtn,this),cc.log("asdas",this.btnLeft)},updateBtnController:function(t,e,i,o){var s=0===t.col,c=t.col===e-1,r=0===t.row,a=t.row===i-1,l=[t.row,t.col];0==s&&(0,n.checkArrayInArray2D)(l,o.wallLeft)&&(s=!0),0==c&&(0,n.checkArrayInArray2D)(l,o.wallRight)&&(c=!0),0==r&&(0,n.checkArrayInArray2D)(l,o.wallTop)&&(r=!0),0==a&&(0,n.checkArrayInArray2D)(l,o.wallBottom)&&(a=!0),this.btnLeft.active=!s,this.btnRight.active=!c,this.btnUp.active=!r,this.btnDown.active=!a},updateDiceNumber:function(t,e){switch(Number(e)){case o:this.btnLeft.getComponentInChildren(cc.Label).string=t;break;case s:this.btnRight.getComponentInChildren(cc.Label).string=t;break;case c:this.btnUp.getComponentInChildren(cc.Label).string=t;break;case r:this.btnDown.getComponentInChildren(cc.Label).string=t}},updateColorBtn:function(t,e,i,n){var a=new cc.Color(0,255,224,255);this.btnLeft.color=a,this.btnRight.color=a,this.btnUp.color=a,this.btnDown.color=a;var l=t.col-1==e.col&&t.row==e.row,u=t.col+1==e.col&&t.row==e.row,h=t.row-1==e.row&&t.col==e.col,p=t.row+1==e.row&&t.col==e.col;l?this.btnLeft.color=i[o-1]==n?cc.Color.GREEN:cc.Color.RED:u?this.btnRight.color=i[s-1]==n?cc.Color.GREEN:cc.Color.RED:h?this.btnUp.color=i[c-1]==n?cc.Color.GREEN:cc.Color.RED:p&&(this.btnDown.color=i[r-1]==n?cc.Color.GREEN:cc.Color.RED)}}),cc._RF.pop()},{"./otherProcessing.js":"otherProcessing"}],DiceController:[function(t,e,i){"use strict";cc._RF.push(e,"98b1eQERldKvqx9ue0qUofo","DiceController");var n=t("Dice"),o=(t("Map"),t("mEmitter")),s=1,c=2,r=3,a=4;cc.Class({extends:cc.Component,properties:{atlas:cc.SpriteAtlas,_indexDice:1,map:cc.Node,btnHolder:cc.Node,moves:cc.Label,diceFace:{type:[cc.Label],default:[]}},createDice:function(t){this.dice=new n(t.firstRow,t.secondRow,t.thirdRow),this.changeAtlas(this.dice.diceFace-1),this.countMove=t.moves[0],this._totalMove=t.moves[0],this.moves.getComponent(cc.Label).string=this.countMove+"/"+this._totalMove,this.posStart=t.start,this.newMap=this.map.getComponent("MapController").map,this.destination={row:t.destination[0],col:t.destination[1]},this.currentLevel=t.level,this.diceMovingSteps=[]},setupDice:function(t){this.diceResult=6,this.tilesMap=this.map.getComponent("MapController").tiles,this.node.position=this.tilesMap[t[0]][t[1]].position,this.node.x+=40,this.node.y-=40,this.currentDicePos={row:t[0],col:t[1]},this.diceMovingSteps=[]},moveDice:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.tilesMap=this.map.getComponent("MapController").tiles,!this.isMovingDice){this.btnHolder.active=!1;var l=this.currentDicePos.col,u=this.currentDicePos.row;n||this.diceMovingSteps.push(e);var h=this.dice.diceFace;switch(Number(e)){case s:o.instance.emit("dice"),l>0&&(l-=1,this.Left(),this.node.angle=270);break;case c:o.instance.emit("dice"),l<this.newMap.cols-1&&(l+=1,this.Right(),this.node.angle=90);break;case r:o.instance.emit("dice"),u>0&&(u-=1,this.Up(),this.node.angle=180);break;case a:o.instance.emit("dice"),u<this.newMap.rows-1&&(u+=1,this.Down())}var p=this.dice.diceFace;if(this.node.getComponent(cc.Animation).play(h+" to "+p),this.lastMove=e,this.currentDicePos={row:u,col:l},this.isMovingDice=!0,-1<u<this.newMap.rows&&-1<l<this.newMap.cols){var d=this.tilesMap[u][l].position;d.x+=40,d.y-=40,d?this.node.runAction(cc.sequence(cc.moveTo(.3,d),cc.callFunc(function(){i.countMove--,i.moves.getComponent(cc.Label).string=i.countMove+"/"+i._totalMove,u===i.newMap.destination[0]&&l===i.newMap.destination[1]&&i.getDiceFace()===i.diceResult?i.playEndGame(!0):u===i.destination.row&&l===i.destination.col&&i.getDiceFace()!=i.diceResult?i.playEndGame():0===i.countMove?(o.instance.emit("GAME_OVER",i.currentLevel),i.isMovingDice=!1):i.isMovingDice=!1,i.showBtnDirection(),i.node.angle=0}))):cc.error("\xf4 tr\xean kh\xf4ng h\u1ee3p l\u1ec7.")}}},undoMove:function(){if(!this.isMovingDice)if(this.moves.active=!1,this.diceMovingSteps&&this.diceMovingSteps.length&&this.diceMovingSteps[this.diceMovingSteps.length-1]){this.countMove++,this.moves.getComponent(cc.Label).string=this.countMove+"/"+this._totalMove;var t=this.diceMovingSteps.pop();switch(Number(t)){case s:this.moveDice(null,c,!0),this.countMove++;break;case c:this.moveDice(null,s,!0),this.countMove++;break;case r:this.moveDice(null,a,!0),this.countMove++;break;case a:this.moveDice(null,r,!0),this.countMove++}}else cc.error("Kh\xf4ng c\xf3 l\u01b0\u1ee3t ch\u01a1i tr\u01b0\u1edbc")},playEndGame:function(t){var e=this;this.onBlackHole(),this.node.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){t?(o.instance.emit("COMPLETE_LEVEL",e.currentLevel),e.node.active=!1):(o.instance.emit("GAME_OVER",e.currentLevel),e.node.active=!1),e.isMovingDice=!1,e.btnHolder.active=!1,e.showBtnDirection()})))},onBlackHole:function(){var t=this;o.instance.emit("blackHole"),this.node.oldAnchorX=this.node.anchorX,this.node.oldAnchorY=this.node.anchorY,this.node.anchorX=.5,this.node.anchorY=.5,this.btnHolder.active=!1;var e=cc.rotateBy(1,360).repeatForever(),i=cc.scaleTo(1,0,0),n=cc.spawn(e,i);this.node.runAction(cc.sequence(n,cc.callFunc(function(){t.node.scale=1,t.node.angle=0,t.node.anchorX=t.node.oldAnchorX,t.node.anchorY=t.node.oldAnchorY})))},showBtnDirection:function(){this.isMovingDice||(this.btnHolder.active=!0,this.btnHolder.emit("UPDATE_BTN_CONTROLLER",this.currentDicePos,this.newMap.cols,this.newMap.rows,this.newMap),this.btnHolder.emit("UPDATE_DICE_COLOR",this.currentDicePos,this.destination,this.getFacesText(),this.diceResult),this.onDiceFaces())},onDiceFaces:function(){var t=this;this.diceFace=this.getFacesText().map(function(e,i){t.btnHolder.emit("UPDATE_DICE_NUMBER",e,i+1)})},changeAtlas:function(t){this.node.getComponent(cc.Sprite).spriteFrame=this.atlas.getSpriteFrames()[t]},Left:function(){this._indexDice=this.dice.Left(),this.changeAtlas(this._indexDice)},Right:function(){this._indexDice=this.dice.Right(),this.changeAtlas(this._indexDice)},Up:function(){this._indexDice=this.dice.Up(),this.changeAtlas(this._indexDice)},Down:function(){this._indexDice=this.dice.Down(),this.changeAtlas(this._indexDice)},getFacesText:function(){return this.dice.setFacesText()},getDiceFace:function(){return this.dice.diceFace}}),cc._RF.pop()},{Dice:"Dice",Map:"Map",mEmitter:"mEmitter"}],Dice:[function(t,e,i){"use strict";cc._RF.push(e,"ed4a6QDPp5KSJKQgQ1uOjEy","Dice");var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(e,i,n){o(this,t),this.firstRow=e,this.secondRow=i,this.thirdRow=n,this.diceFace=this.secondRow[1]}return n(t,[{key:"Up",value:function(){return this.firstRow[1]=this.secondRow[1],this.secondRow[1]=this.thirdRow[1],this.thirdRow[1]=7-this.firstRow[1],this.diceFace=this.secondRow[1],this.diceFace-1}},{key:"Down",value:function(){return this.thirdRow[1]=this.secondRow[1],this.secondRow[1]=this.firstRow[1],this.firstRow[1]=7-this.thirdRow[1],this.diceFace=this.secondRow[1],this.diceFace-1}},{key:"Left",value:function(){return this.secondRow[0]=this.secondRow[1],this.secondRow[1]=this.secondRow[2],this.secondRow[2]=7-this.secondRow[0],this.diceFace=this.secondRow[1],this.diceFace-1}},{key:"Right",value:function(){return this.secondRow[2]=this.secondRow[1],this.secondRow[1]=this.secondRow[0],this.secondRow[0]=7-this.secondRow[2],this.diceFace=this.secondRow[1],this.diceFace-1}},{key:"setFacesText",value:function(){return[this.secondRow[2],this.secondRow[0],this.thirdRow[1],this.firstRow[1]].map(String)}}]),t}();e.exports=s,cc._RF.pop()},{}],MapController:[function(t,e,i){"use strict";cc._RF.push(e,"d246fKF5YBG55bibRJetX25","MapController");t("os");var n=t("./otherProcessing.js"),o=t("Map");cc.Class({extends:cc.Component,properties:{atlas:[cc.SpriteAtlas],prefabs:[cc.Prefab],tiles:[cc.Node],spriteDestination:cc.SpriteFrame,map:null},start:function(){},renderMap:function(t){this.destroyChildrenNode(),this.tiles=[];for(var e=0;e<t.rows;e++){this.tiles.push([]);for(var i=0;i<t.cols;i++){var o=cc.instantiate(this.prefabs[0]);this.tiles[e].push(o),o.parent=this.node,o.x=80*i,o.y=80*(t.cols-e);var s=[e,i];(0,n.checkArrayInArray2D)(s,t.wallLeft)&&(o.getChildByName("left").active=!0),(0,n.checkArrayInArray2D)(s,t.wallRight)&&(o.getChildByName("right").active=!0),(0,n.checkArrayInArray2D)(s,t.wallTop)&&(o.getChildByName("top").active=!0),(0,n.checkArrayInArray2D)(s,t.wallBottom)&&(o.getChildByName("bottom").active=!0),s[0]==t.destination[0]&&s[1]==t.destination[1]&&(o.getComponent(cc.Sprite).spriteFrame=this.spriteDestination,o.getChildByName("EndHoleText").active=!0)}}return[t.start[0],t.start[1]]},destroyChildrenNode:function(){for(var t=this.node.children,e=0;e<t.length;++e)"Element"==t[e].name&&t[e].destroy()},createMapWithCsv:function(t){return this.map=new o,this.map.setWall(t.wallLeft,"left"),this.map.setWall(t.wallRight,"right"),this.map.setWall(t.wallTop,"top"),this.map.setWall(t.wallBottom,"bottom"),this.map.setStart(t.start[0],t.start[1]),this.map.setDestination(t.destination[0],t.destination[1]),this.map}}),cc._RF.pop()},{"./otherProcessing.js":"otherProcessing",Map:"Map",os:2}],Map:[function(t,e,i){"use strict";cc._RF.push(e,"dcb8el0DwdBXoY1UqkiB8q1","Map");var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;o(this,t),this.rows=i,this.cols=e,this.wallLeft=[],this.wallRight=[],this.wallTop=[],this.wallBottom=[],this.destination=[5,5],this.start=[0,0]}return n(t,[{key:"setWall",value:function(t,e){var i,n=this,o=[];if(t.forEach(function(t){if(!n.checkPosition(t[0],t[1]))return!1;o.push(t)}),"left"==e)(i=this.wallLeft).push.apply(i,o),o.forEach(function(t){n.checkPosition(t[0],t[1]-1)&&n.wallRight.push([t[0],t[1]-1])});else if("right"==e){var s;(s=this.wallRight).push.apply(s,o),o.forEach(function(t){n.checkPosition(t[0],t[1]+1)&&n.wallLeft.push([t[0],t[1]+1])})}else if("top"==e){var c;(c=this.wallTop).push.apply(c,o),o.forEach(function(t){n.checkPosition(t[0]-1,t[1])&&n.wallBottom.push([t[0]-1,t[1]])})}else{if("bottom"!=e)return!1;var r;(r=this.wallBottom).push.apply(r,o),o.forEach(function(t){n.checkPosition(t[0]+1,t[1])&&n.wallTop.push([t[0]+1,t[1]])})}return!0}},{key:"checkPosition",value:function(t,e){return t>=0&&e>=0&&t<this.rows&&e<this.cols}},{key:"setDestination",value:function(t,e){return!!this.checkPosition(e,t)&&(this.destination=[t,e],!0)}},{key:"setStart",value:function(t,e){return!!this.checkPosition(e,t)&&(this.start=[t,e],!0)}}]),t}();e.exports=s,cc._RF.pop()},{}],SoundController:[function(t,e,i){"use strict";cc._RF.push(e,"0eb05F/i2VCpqW+x/Yu9lQe","SoundController");var n=t("mEmitter");cc.Class({extends:cc.Component,properties:{soundClick:{type:cc.AudioClip,default:null},musicAudio:{type:cc.AudioClip,default:null},musicAudioInGame:{type:cc.AudioClip,default:null},diceRolling:{type:cc.AudioClip,default:null},blackHole:{type:cc.AudioClip,default:null},levelWin:{type:cc.AudioClip,default:null},levelLose:{type:cc.AudioClip,default:null},startRound:{type:cc.AudioClip,default:null},reload:{type:cc.AudioClip,default:null},back:{type:cc.AudioClip,default:null}},onLoad:function(){n.instance.registerEvent("clickSound",this.onSoundButton.bind(this)),n.instance.registerEvent("playMusic",this.onPlayMainMenu.bind(this)),n.instance.registerEvent("playMusicIngame",this.onPlayIngame.bind(this)),n.instance.registerEvent("changeVolume",this.onChangeVolume.bind(this)),n.instance.registerEvent("dice",this.onDiceRolling.bind(this)),n.instance.registerEvent("blackHole",this.onBlackHole.bind(this)),n.instance.registerEvent("levelWin",this.onlevelWin.bind(this)),n.instance.registerEvent("levelLose",this.onlevelLose.bind(this)),n.instance.registerEvent("startRound",this.onStartRound.bind(this)),n.instance.registerEvent("reload",this.onReload.bind(this)),n.instance.registerEvent("back",this.onBack.bind(this)),this.onPlayMainMenu()},onSoundButton:function(){cc.audioEngine.playEffect(this.soundClick,!1);var t=cc.sys.localStorage.getItem("volumeSound");null==t&&(t=1),cc.audioEngine.setEffectsVolume(t/10)},onReload:function(){cc.audioEngine.playEffect(this.reload,!1);var t=cc.sys.localStorage.getItem("volumeSound");null==t&&(t=1),cc.audioEngine.setEffectsVolume(t/10)},onBack:function(){cc.audioEngine.playEffect(this.back,!1);var t=cc.sys.localStorage.getItem("volumeSound");null==t&&(t=1),cc.audioEngine.setEffectsVolume(t/10)},onlevelWin:function(){cc.audioEngine.playEffect(this.levelWin,!1);var t=cc.sys.localStorage.getItem("volumeSound");null==t&&(t=1),cc.audioEngine.setEffectsVolume(t/3)},onlevelLose:function(){cc.audioEngine.playEffect(this.levelLose,!1);var t=cc.sys.localStorage.getItem("volumeSound");null==t&&(t=1),cc.audioEngine.setEffectsVolume(t/10)},onStartRound:function(){cc.audioEngine.playEffect(this.startRound,!1);var t=cc.sys.localStorage.getItem("volumeSound");null==t&&(t=1),cc.audioEngine.setEffectsVolume(t/10)},onBlackHole:function(){cc.audioEngine.playEffect(this.blackHole,!1);var t=cc.sys.localStorage.getItem("volumeSound");null==t&&(t=1),cc.audioEngine.setEffectsVolume(t/12)},onPlayMainMenu:function(){cc.audioEngine.playMusic(this.musicAudio,!0),this.onChangeVolume()},onPlayIngame:function(){cc.audioEngine.playMusic(this.musicAudioInGame,!0),this.onChangeVolume()},onChangeVolume:function(){var t=cc.sys.localStorage.getItem("volumeMusic");null==t&&(t=1),cc.audioEngine.setMusicVolume(t/10)},onDiceRolling:function(){cc.audioEngine.playEffect(this.diceRolling,!1);var t=cc.sys.localStorage.getItem("volumeSound");null==t&&(t=1),cc.audioEngine.setEffectsVolume(t/10)}}),cc._RF.pop()},{mEmitter:"mEmitter"}],gameController:[function(t,e,i){"use strict";cc._RF.push(e,"ba0e2Qxs25Pgqrm265h5PbB","gameController");var n=t("./otherProcessing.js"),o=(t("Map"),t("mEmitter"));cc.Class({extends:cc.Component,properties:{map:cc.Node,diceController:cc.Node,levelScreen:cc.Node,levels:[cc.TextAsset],diceNode:cc.Node,btnHolder:cc.Node,popupGameWin:cc.Node,popupGameOver:cc.Node,popupSettings:cc.Node,tutorialPopup:cc.Node,_level:0,_isShow:!1},onLoad:function(){null==cc.sys.localStorage.getItem("unlock")&&(this.tutorialPopup.active=!0,this.blockButton()),o.instance.registerEvent("COMPLETE_LEVEL",this.showPopupGameWin.bind(this)),o.instance.registerEvent("GAME_OVER",this.showPopupGameOver.bind(this))},startGame:function(t){this._level=t,this.dataLevel=this.levels[t].text,this.dataLevel=(0,n.readFile)(this.dataLevel),this.dataLevel.level=t+1,this.createMap(this.dataLevel)},createMap:function(t){this.dice=this.diceController.getComponent("DiceController"),this.newMap=this.map.getComponent("MapController").createMapWithCsv(t),this.posStart=this.map.getComponent("MapController").renderMap(this.newMap),this.diceController.zIndex=999,this.dice.createDice(t),this.dice.setupDice(this.posStart),cc.log(this.newMap)},showPopupGameWin:function(){o.instance.emit("levelWin"),this.blockButton(),this.popupGameWin.active=!0},showPopupGameOver:function(){o.instance.emit("levelLose"),this.blockButton(),this.popupGameOver.active=!0},reloadGame:function(){this.dice.isMovingDice||(o.instance.emit("reload"),this.hidePopup(),this.unblockButton(),this.startGame(this._level))},undoMove:function(){o.instance.emit("back"),this.dice.undoMove()},playNextLevel:function(){var t=this._level+1;t>=this.levels.length?this.backLevelScreen():(o.instance.emit("clickSound"),o.instance.emit("startRound"),this.hidePopup(),this.startGame(t),this.unblockButton())},hidePopup:function(){this.diceNode.active=!0,this.popupGameWin.active=!1,this.popupGameOver.active=!1,this.popupSettings.active=!1,this.btnHolder.active=!1},backLevelScreen:function(){o.instance.emit("clickSound"),o.instance.emit("playMusic"),this.node.parent.active=!1,this.levelScreen.active=!0,this.hidePopup(),this.unblockButton()},closeTutorial:function(){o.instance.emit("clickSound"),this.tutorialPopup.active=!1,this.unblockButton()},onTutorialPopup:function(){o.instance.emit("clickSound"),this.tutorialPopup.active=!0,this.blockButton()},blockButton:function(){var t=this.node.parent.getComponentsInChildren(cc.Button);this.node.parent.opacity=108;for(var e=0;e<t.length;e++)t[e].interactable=!1},unblockButton:function(){var t=this.node.parent.getComponentsInChildren(cc.Button);this.node.parent.opacity=255;for(var e=0;e<t.length;e++)t[e].interactable=!0}}),cc._RF.pop()},{"./otherProcessing.js":"otherProcessing",Map:"Map",mEmitter:"mEmitter"}],levelController:[function(t,e,i){"use strict";cc._RF.push(e,"9cc31tF6a1C248VePDgXT98","levelController");var n=t("mEmitter");cc.Class({extends:cc.Component,properties:{loginScreen:cc.Node,levelUnlock:cc.SpriteFrame,content:cc.Node,prefabLevel:cc.Prefab,scrollView:cc.ScrollView,_countLevel:50},onLoad:function(){this._countLevel=50,this.hideScrollBar()},onBack:function(){n.instance.emit("clickSound"),this.node.active=!1,this.loginScreen.active=!0},loadLevel:function(){this.content.removeAllChildren();var t=cc.sys.localStorage.getItem("unlock");null==t&&(t=1);for(var e=0;e<this._countLevel;e++){for(var i=cc.instantiate(this.prefabLevel),n=0;n<t;n++)e!=n||(i.getComponent(cc.Sprite)._spriteFrame=this.levelUnlock,i.children[0].active=!0,i.children[0].getComponent(cc.Label).string=e+1);this.content.addChild(i)}},hideScrollBar:function(){this.scrollView.verticalScrollBar=null}}),cc._RF.pop()},{mEmitter:"mEmitter"}],level:[function(t,e,i){"use strict";cc._RF.push(e,"2436djvFsNB3puKvet7wqj9","level");var n=t("mEmitter");cc.Class({extends:cc.Component,properties:{},selectedLevel:function(){if(n.instance.emit("clickSound"),this.node.children[0].active){n.instance.emit("startRound"),n.instance.emit("playMusicIngame");var t=this.node.children[0].getComponent(cc.Label).string;t=parseInt(t)-1,n.instance.emit("SELECTED_LEVEL",t)}else this.showNotification()},getParent:function(){for(var t=this.node,e=0;t.getParent()&&e<4;)t=t.getParent(),e++;return t},showNotification:function(){var t=this;this.getParent().children[3].children[1].getComponent(cc.Label).string="Levels are not unlocked yet",this.getParent().children[3].active=!0,this.scheduleOnce(function(){t.getParent().children[3].active=!1},3)}}),cc._RF.pop()},{mEmitter:"mEmitter"}],loginController:[function(t,e,i){"use strict";cc._RF.push(e,"bb3cfB7p5VH8pXQ2XkmMdjv","loginController");var n=t("mEmitter");cc.Class({extends:cc.Component,properties:{nameEditBox:cc.EditBox,playButton:cc.Button,settingButton:cc.Button,settingPage:cc.Layout,levelScreen:cc.Node,warningLabel:cc.Label,soundSlider:cc.Slider,soundLabel:cc.Label,soundButton:cc.Button,soundButtonOffSprite:cc.SpriteFrame,soundButtonOnSprite:cc.SpriteFrame,title:cc.Label},onLoad:function(){this.soundSlider.node.on("slide",this.onChangeSound.bind(this)),this.soundButton.node.on("click",this.onButtonClickSound,this)},start:function(){},onChangeSound:function(){var t=10*this.soundSlider.progress.toFixed(1);cc.sys.localStorage.setItem("volumeSound",t),this.soundLabel.string=t;var e=0===t?this.soundButtonOffSprite:this.soundButtonOnSprite;return this.soundButton.getComponent(cc.Sprite).spriteFrame=e,cc.sys.localStorage.setItem("spriteFrame",this.soundButton.getComponent(cc.Sprite).spriteFrame.name),t},onButtonClickSound:function(){n.instance.emit("clickSound");var t=0===this.onChangeSound()?1:0,e=0===t?this.soundButtonOffSprite:this.soundButtonOnSprite;return 0===t?(this.soundButton.getComponent(cc.Sprite).spriteFrame=this.soundButtonOffSprite,cc.sys.localStorage.setItem("spriteFrame",this.soundButtonOffSprite.name),cc.log(this.soundButtonOffSprite.name)):(this.soundButton.getComponent(cc.Sprite).spriteFrame=this.soundButtonOnSprite,cc.sys.localStorage.setItem("spriteFrame",this.soundButtonOnSprite.name),cc.log(this.soundButtonOnSprite.name)),this.soundSlider.progress=t,this.soundLabel.string=10*t.toFixed(1),cc.sys.localStorage.setItem("volumeSound",10*t.toFixed(1)),e},loadDataSound:function(){var t=cc.sys.localStorage.getItem("volumeSound"),e=cc.sys.localStorage.getItem("spriteFrame");cc.log(e),null==t&&(t=1),this.soundLabel.string=t,e===this.soundButtonOnSprite.name?this.soundButton.getComponent(cc.Sprite).spriteFrame=this.soundButtonOnSprite:e===this.soundButtonOffSprite.name?this.soundButton.getComponent(cc.Sprite).spriteFrame=this.soundButtonOffSprite:cc.error("Sprite frame not found:",e),this.soundSlider.progress=t/10},onSubmit:function(){n.instance.emit("clickSound"),this.node.active=!1,this.levelScreen.getComponent("levelController").loadLevel(),this.levelScreen.active=!0},onShowSettingPage:function(){n.instance.emit("clickSound"),this.nameEditBox.enabled=!1,this.node.opacity=108,this.loadDataSound(),this.settingPage.getComponent("settingController").loadDataMusic(),this.settingPage.node.active=!0;for(var t=this.node.getComponentsInChildren(cc.Button),e=0;e<t.length;e++)t[e].interactable=!1},onHideSettingPage:function(){n.instance.emit("clickSound"),this.nameEditBox.enabled=!0,this.settingPage.node.active=!1,this.node.opacity=255;for(var t=this.node.getComponentsInChildren(cc.Button),e=0;e<t.length;e++)t[e].interactable=!0}}),cc._RF.pop()},{mEmitter:"mEmitter"}],mEmitter:[function(t,e,i){"use strict";cc._RF.push(e,"69556ja+GpMF7edM7x7RE0/","mEmitter");var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=t("events"),c=function(){function t(){o(this,t),this._emiter=new s,this._emiter.setMaxListeners(100)}return n(t,[{key:"emit",value:function(){var t;(t=this._emiter).emit.apply(t,arguments)}},{key:"registerEvent",value:function(t,e){this._emiter.on(t,e)}},{key:"registerOnce",value:function(t,e){this._emiter.once(t,e)}},{key:"removeEvent",value:function(t,e){this._emiter.removeListener(t,e)}},{key:"destroy",value:function(){this._emiter.removeAllListeners(),this._emiter=null,t.instance=null}}]),t}();c.instance=null,e.exports=c,cc._RF.pop()},{events:1}],mainController:[function(t,e,i){"use strict";cc._RF.push(e,"f8066Qnw9pNJJIfRH7tdRz3","mainController");var n=t("mEmitter");cc.Class({extends:cc.Component,properties:{levelScreen:cc.Node,gameScreen:cc.Node,content:cc.Node,musicSlider:cc.Slider,musicSliderPrefab:cc.Slider,musicAudio:cc.AudioSource,scrollview:cc.ScrollView},onLoad:function(){var t=this;cc.view.setResizeCallback(function(){t.adjustSize()}),this.adjustSize(),this.hideScrollbar(),n.instance=new n,n.instance.registerEvent("SELECTED_LEVEL",this.onSelectedLevel.bind(this)),n.instance.registerEvent("COMPLETE_LEVEL",this.unlockNextLevel.bind(this))},onSelectedLevel:function(t){this.gameScreen.children[0].getComponent("gameController").startGame(t),this.levelScreen.active=!1,this.gameScreen.active=!0},unlockNextLevel:function(t){var e=this,i=this.gameScreen.children[0].getComponent("gameController").levels.length,n=t+1,o=cc.sys.localStorage.getItem("unlock");o=parseInt(o),n>i?(cc.sys.localStorage.setItem("unlock",t),this.levelScreen.children[3].children[1].getComponent(cc.Label).string="The game is developing",this.levelScreen.children[3].active=!0,this.scheduleOnce(function(){e.levelScreen.children[3].active=!1},3)):t<o?cc.sys.localStorage.setItem("unlock",o):cc.sys.localStorage.setItem("unlock",n),this.levelScreen.getComponent("levelController").loadLevel()},adjustSize:function(){var t=cc.view.getVisibleSize(),e=t.width/t.height,i=t.width,n=t.height;e<2?n=t.width/2:i=2*t.height,this.node.width=i,this.node.height=n},hideScrollbar:function(){this.scrollview.horizontalScrollBar=null,this.scrollview.verticalScrollBar=null}}),cc._RF.pop()},{mEmitter:"mEmitter"}],otherProcessing:[function(t,e,i){"use strict";function n(t){return String(t).split(".").map(function(t){return parseInt(t)})}cc._RF.push(e,"d1d720zAB5JSogGAm6DstP7","otherProcessing"),Object.defineProperty(i,"__esModule",{value:!0}),i.checkArrayInArray2D=function(t,e){for(var i=0;i<e.length;i++){var n=e[i];if(n.length===t.length){for(var o=!0,s=0;s<n.length;s++)if(n[s]!==t[s]){o=!1;break}if(o)return!0}}return!1},i.stringToArray=n,i.readFile=function(t){var e=t.split("\n"),i={},o=e[1].split(",");i.start=n(o[0]),i.destination=n(o[1]),i.firstRow=n(o[6]),i.secondRow=n(o[7]),i.thirdRow=n(o[8]),i.moves=n(o[9]);for(var s=[],c=[],r=[],a=[],l=1;l<e.length;l++)""!=(t=e[l].split(","))[2]&&s.push(n(t[2])),""!=t[3]&&c.push(n(t[3])),""!=t[4]&&r.push(n(t[4])),""!=t[5]&&a.push(n(t[5]));return i.wallLeft=s,i.wallRight=c,i.wallTop=r,i.wallBottom=a,i},cc._RF.pop()},{}],pausePageController:[function(t,e,i){"use strict";cc._RF.push(e,"5299e7a7HlCp5LOSe4Kyrmr","pausePageController");var n=t("mEmitter");cc.Class({extends:cc.Component,properties:{playButton:cc.Button,backButton:cc.Button,soundSliderPrefab:cc.Slider,musicSliderPrefab:cc.Slider,LoginPage:cc.Layout,musicLabel:cc.Label,musicButton:cc.Button,musicButtonOffSprite:cc.SpriteFrame,musicButtonOnSprite:cc.SpriteFrame,LevelScreen:cc.Node,gamePage:cc.Node,soundSliderPause:cc.Slider,soundLabelPause:cc.Label,soundButtonPause:cc.Button,soundButtonOffSprite:cc.SpriteFrame,soundButtonOnSprite:cc.SpriteFrame},onLoad:function(){this.musicSliderPrefab.node.on("slide",this.onSendMusicSliderChange,this),this.musicButton.node.on("click",this.onMusicPauseButtonClick,this),this.soundSliderPause.node.on("slide",this.onChangeSound.bind(this)),this.soundButtonPause.node.on("click",this.onButtonClickSound,this)},onChangeSound:function(){var t=10*this.soundSliderPause.progress.toFixed(1);cc.sys.localStorage.setItem("volumeSound",t),this.soundLabelPause.string=t;var e=0===t?this.soundButtonOffSprite:this.soundButtonOnSprite;return this.soundButtonPause.getComponent(cc.Sprite).spriteFrame=e,cc.sys.localStorage.setItem("spriteFrame",this.soundButtonPause.getComponent(cc.Sprite).spriteFrame.name),t},onButtonClickSound:function(){n.instance.emit("clickSound");var t=0===this.onChangeSound()?1:0,e=0===t?this.soundButtonOffSprite:this.soundButtonOnSprite;return 0===t?(this.soundButtonPause.getComponent(cc.Sprite).spriteFrame=this.soundButtonOffSprite,cc.sys.localStorage.setItem("spriteFrame",this.soundButtonPause.getComponent(cc.Sprite).spriteFrame.name)):(this.soundButtonPause.getComponent(cc.Sprite).spriteFrame=this.soundButtonOnSprite,cc.sys.localStorage.setItem("spriteFrame",this.soundButtonPause.getComponent(cc.Sprite).spriteFrame.name)),this.soundSliderPause.progress=t,this.soundLabelPause.string=10*t.toFixed(1),cc.sys.localStorage.setItem("volumeSound",10*t.toFixed(1)),e},loadData:function(){var t=cc.sys.localStorage.getItem("volumeSound"),e=cc.sys.localStorage.getItem("spriteFrame");null==t&&(t=1),this.soundLabelPause.string=t,e===this.soundButtonOnSprite.name?this.soundButtonPause.getComponent(cc.Sprite).spriteFrame=this.soundButtonOnSprite:e===this.soundButtonOffSprite.name?this.soundButtonPause.getComponent(cc.Sprite).spriteFrame=this.soundButtonOffSprite:cc.error("Sprite frame not found:",e),this.soundSliderPause.progress=t/10},start:function(){},onBack:function(){n.instance.emit("clickSound"),this.onUnblock(),this.gamePage.opacity=255,this.node.active=!1},onBackMainMenu:function(){n.instance.emit("clickSound"),n.instance.emit("playMusic"),this.onUnblock(),this.node.active=!1,this.gamePage.active=!1,this.LevelScreen.active=!0},onUnblock:function(){for(var t=this.gamePage.getComponentsInChildren(cc.Button),e=0;e<t.length;e++)t[e].interactable=!0},onSendMusicSliderChange:function(t){n.instance.emit("changeVolume");var e=10*t.progress.toFixed(1);cc.sys.localStorage.setItem("volumeMusic",e),this.musicLabel.string=e;var i=0===e?this.musicButtonOffSprite:this.musicButtonOnSprite;this.musicButton.getComponent(cc.Sprite).spriteFrame=i,cc.sys.localStorage.setItem("spriteFrameMusic",this.musicButton.getComponent(cc.Sprite).spriteFrame.name)},onMusicPauseButtonClick:function(){n.instance.emit("clickSound");var t=0===this.musicSliderPrefab.progress?1:0;0===t?(this.musicButton.getComponent(cc.Sprite).spriteFrame=this.musicButtonOffSprite,cc.sys.localStorage.setItem("spriteFrameMusic",this.musicButtonOffSprite.name)):(this.musicButton.getComponent(cc.Sprite).spriteFrame=this.musicButtonOnSprite,cc.sys.localStorage.setItem("spriteFrameMusic",this.musicButtonOnSprite.name)),this.musicSliderPrefab.progress=t,this.musicLabel.string=10*t.toFixed(1),cc.sys.localStorage.setItem("volumeMusic",10*t.toFixed(1)),n.instance.emit("changeVolume")},loadDataMusic:function(){var t=cc.sys.localStorage.getItem("volumeMusic"),e=cc.sys.localStorage.getItem("spriteFrameMusic");null==t&&(t=1),null==e&&(e=this.musicButtonOffSprite),this.musicLabel.string=t,e===this.musicButtonOnSprite.name?this.musicButton.getComponent(cc.Sprite).spriteFrame=this.musicButtonOnSprite:e===this.musicButtonOffSprite.name?this.musicButton.getComponent(cc.Sprite).spriteFrame=this.musicButtonOffSprite:cc.error("Sprite frame not found:",e),this.musicSliderPrefab.progress=t/10}}),cc._RF.pop()},{mEmitter:"mEmitter"}],settingController:[function(t,e,i){"use strict";cc._RF.push(e,"f1ed86nuC5Kh43SoiJOtG9s","settingController");var n=t("mEmitter");cc.Class({extends:cc.Component,properties:{musicSlider:cc.Slider,soundSlider:cc.Slider,loginPage:cc.Layout,pausePage:cc.Layout,musicLabel:cc.Label,musicButton:cc.Button,musicButtonOffSprite:cc.SpriteFrame,musicButtonOnSprite:cc.SpriteFrame,gameScreen:cc.Node,levelScreen:cc.Node},onLoad:function(){this.musicSlider.node.on("slide",this.onSendMusicSliderChange,this),this.musicButton.node.on("click",this.onMusicButtonClick,this)},start:function(){},onPauseButtonBoard:function(){n.instance.emit("clickSound"),this.pausePage.getComponent("pausePageController").loadData(),this.pausePage.getComponent("pausePageController").loadDataMusic();var t=this.gameScreen.getComponentsInChildren(cc.Button);this.gameScreen.opacity=108;for(var e=0;e<t.length;e++)t[e].interactable=!1;this.pausePage.node.active=!0},onSendMusicSliderChange:function(){n.instance.emit("changeVolume");var t=10*this.musicSlider.progress.toFixed(1);cc.sys.localStorage.setItem("volumeMusic",t),this.musicLabel.string=t;var e=0===t?this.musicButtonOffSprite:this.musicButtonOnSprite;this.musicButton.getComponent(cc.Sprite).spriteFrame=e,cc.sys.localStorage.setItem("spriteFrameMusic",this.musicButton.getComponent(cc.Sprite).spriteFrame.name)},onMusicButtonClick:function(){n.instance.emit("clickSound");var t=0===this.musicSlider.progress?1:0;console.log(t),0===t?(this.musicButton.getComponent(cc.Sprite).spriteFrame=this.musicButtonOffSprite,cc.sys.localStorage.setItem("spriteFrameMusic",this.musicButtonOffSprite.name)):(this.musicButton.getComponent(cc.Sprite).spriteFrame=this.musicButtonOnSprite,cc.sys.localStorage.setItem("spriteFrameMusic",this.musicButtonOnSprite.name)),this.musicSlider.progress=t,this.musicLabel.string=10*t.toFixed(1),cc.sys.localStorage.setItem("volumeMusic",10*t.toFixed(1)),n.instance.emit("changeVolume")},loadDataMusic:function(){var t=cc.sys.localStorage.getItem("volumeMusic"),e=cc.sys.localStorage.getItem("spriteFrameMusic");null==t&&(t=1),null==e&&(e=this.musicButtonOffSprite),this.musicLabel.string=t,e===this.musicButtonOnSprite.name?this.musicButton.getComponent(cc.Sprite).spriteFrame=this.musicButtonOnSprite:e===this.musicButtonOffSprite.name?this.musicButton.getComponent(cc.Sprite).spriteFrame=this.musicButtonOffSprite:cc.error("Sprite frame not found:",e),this.musicSlider.progress=t/10}}),cc._RF.pop()},{mEmitter:"mEmitter"}]},{},["BtnDirection","Dice","DiceController","Map","MapController","SoundController","gameController","level","levelController","loginController","mEmitter","mainController","otherProcessing","pausePageController","settingController"]);