window.__require=function e(t,i,n){function s(r,c){if(!i[r]){if(!t[r]){var a=r.split("/");if(a=a[a.length-1],!t[a]){var l="function"==typeof __require&&__require;if(!c&&l)return l(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+r+"'")}}var h=i[r]={exports:{}};t[r][0].call(h.exports,function(e){return s(t[r][1][e]||e)},h,h.exports,e,t,i,n)}return i[r].exports}for(var o="function"==typeof __require&&__require,r=0;r<n.length;r++)s(n[r]);return s}({BtnDirection:[function(e,t,i){"use strict";cc._RF.push(t,"26fe7EoWvxAX5jTv1SwstBO","BtnDirection");var n=e("./CheckValue.js"),s=1,o=2,r=3,c=4;cc.Class({extends:cc.Component,properties:{btnLeft:cc.Node,btnRight:cc.Node,btnUp:cc.Node,btnDown:cc.Node},onLoad:function(){this.node.on("UPDATE_BTN_CONTROLLER",this.updateBtnController,this),this.node.on("UPDATE_DICE_NUMBER",this.updateDiceNumber,this)},updateBtnController:function(e,t,i,s){var o=0===e.col,r=e.col===t-1,c=0===e.row,a=e.row===i-1,l=[e.row,e.col];0==o&&(0,n.checkArrayInArray2D)(l,s.wallLeft)&&(o=!0),0==r&&(0,n.checkArrayInArray2D)(l,s.wallRight)&&(r=!0),0==c&&(0,n.checkArrayInArray2D)(l,s.wallTop)&&(c=!0),0==a&&(0,n.checkArrayInArray2D)(l,s.wallBottom)&&(a=!0),this.btnLeft.active=!o,this.btnRight.active=!r,this.btnUp.active=!c,this.btnDown.active=!a,cc.log("left",this.btnLeft)},updateDiceNumber:function(e,t){switch(Number(t)){case s:this.btnLeft.getComponentInChildren(cc.Label).string=e;break;case o:this.btnRight.getComponentInChildren(cc.Label).string=e;break;case r:this.btnUp.getComponentInChildren(cc.Label).string=e;break;case c:this.btnDown.getComponentInChildren(cc.Label).string=e}cc.log(s,this.btnLeft.getComponentInChildren(cc.Label).string)}}),cc._RF.pop()},{"./CheckValue.js":"CheckValue"}],1:[function(e,t,i){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function s(e){return"function"==typeof e}function o(e){return"number"==typeof e}function r(e){return"object"==typeof e&&null!==e}function c(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!o(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,i,n,o,a,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var h=new Error('Uncaught, unspecified "error" event. ('+t+")");throw h.context=t,h}if(c(i=this._events[e]))return!1;if(s(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),i.apply(this,o)}else if(r(i))for(o=Array.prototype.slice.call(arguments,1),n=(l=i.slice()).length,a=0;a<n;a++)l[a].apply(this,o);return!0},n.prototype.addListener=function(e,t){var i;if(!s(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,s(t.listener)?t.listener:t),this._events[e]?r(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,r(this._events[e])&&!this._events[e].warned&&(i=c(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!s(t))throw TypeError("listener must be a function");var i=!1;function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var i,n,o,c;if(!s(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(i=this._events[e]).length,n=-1,i===t||s(i.listener)&&i.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(r(i)){for(c=o;c-- >0;)if(i[c]===t||i[c].listener&&i[c].listener===t){n=c;break}if(n<0)return this;1===i.length?(i.length=0,delete this._events[e]):i.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(s(i=this._events[e]))this.removeListener(e,i);else if(i)for(;i.length;)this.removeListener(e,i[i.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?s(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(s(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},{}],CheckValue:[function(e,t,i){"use strict";cc._RF.push(t,"aba88Ao5RhPIZRCfnK1tqn+","CheckValue"),Object.defineProperty(i,"__esModule",{value:!0}),i.checkArrayInArray2D=function(e,t){for(var i=0;i<t.length;i++){var n=t[i];if(n.length===e.length){for(var s=!0,o=0;o<n.length;o++)if(n[o]!==e[o]){s=!1;break}if(s)return!0}}return!1},cc._RF.pop()},{}],DiceController:[function(e,t,i){"use strict";cc._RF.push(t,"98b1eQERldKvqx9ue0qUofo","DiceController");var n=e("MapDice");cc.Class({extends:cc.Component,properties:{atlas:cc.SpriteAtlas,_indexDice:1},onLoad:function(){this.dice=new n([0,3,0],[5,1,2],[0,4,0]),cc.log(this.dice)},changeAtlas:function(e){this.node.getComponent(cc.Sprite).spriteFrame=this.atlas.getSpriteFrames()[e]},Left:function(){this._indexDice=this.dice.Left(),this.changeAtlas(this._indexDice)},Right:function(){this._indexDice=this.dice.Right(),this.changeAtlas(this._indexDice)},Up:function(){this._indexDice=this.dice.Up(),this.changeAtlas(this._indexDice)},Down:function(){this._indexDice=this.dice.Down(),this.changeAtlas(this._indexDice)},getDiceFaces:function(){return this.dice.setDiceFaces()},getDiceFace:function(){return this.dice.diceFace}}),cc._RF.pop()},{MapDice:"MapDice"}],MapController:[function(e,t,i){"use strict";cc._RF.push(t,"d246fKF5YBG55bibRJetX25","MapController");var n=e("./CheckValue.js");cc.Class({extends:cc.Component,properties:{atlas:[cc.SpriteAtlas],prefabs:[cc.Prefab],tiles:[cc.Node],spriteDestination:cc.SpriteFrame},start:function(){},renderMap:function(e){this.destroyChildrenNode(),this.tiles=[];for(var t=0;t<e.rows;t++){this.tiles.push([]);for(var i=0;i<e.cols;i++){var s=cc.instantiate(this.prefabs[0]);this.tiles[t].push(s),s.parent=this.node,s.x=100*i,s.y=100*(e.cols-t);var o=[t,i];(0,n.checkArrayInArray2D)(o,e.wallLeft)&&(s.getChildByName("left").active=!0),(0,n.checkArrayInArray2D)(o,e.wallRight)&&(s.getChildByName("right").active=!0),(0,n.checkArrayInArray2D)(o,e.wallTop)&&(s.getChildByName("top").active=!0),(0,n.checkArrayInArray2D)(o,e.wallBottom)&&(s.getChildByName("bottom").active=!0),o[0]==e.destination[0]&&o[1]==e.destination[1]&&(s.getComponent(cc.Sprite).spriteFrame=this.spriteDestination,s.getChildByName("EndHoleText").active=!0)}}return[e.start[0],e.start[1]]},destroyChildrenNode:function(){for(var e=this.node.children,t=0;t<e.length;++t)"Element"==e[t].name&&e[t].destroy()},checkHaveSetWall:function(e,t){for(var i=0;i<t.length;i++){var n=t[i];if(n.length===e.length){for(var s=!0,o=0;o<n.length;o++)if(n[o]!==e[o]){s=!1;break}if(s)return!0}}return!1}}),cc._RF.pop()},{"./CheckValue.js":"CheckValue"}],MapDice:[function(e,t,i){"use strict";cc._RF.push(t,"b04e2PeEfJK7bt+AzT7DWiR","MapDice");var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(t,i,n){s(this,e),this.firstRow=t,this.secondRow=i,this.thirdRow=n,this.diceFace=this.secondRow[1]}return n(e,[{key:"Up",value:function(){return this.firstRow[1]=this.secondRow[1],this.secondRow[1]=this.thirdRow[1],this.thirdRow[1]=7-this.firstRow[1],this.diceFace=this.secondRow[1],this.diceFace-1}},{key:"Down",value:function(){return this.thirdRow[1]=this.secondRow[1],this.secondRow[1]=this.firstRow[1],this.firstRow[1]=7-this.thirdRow[1],this.diceFace=this.secondRow[1],this.diceFace-1}},{key:"Left",value:function(){return this.secondRow[0]=this.secondRow[1],this.secondRow[1]=this.secondRow[2],this.secondRow[2]=7-this.secondRow[0],this.diceFace=this.secondRow[1],this.diceFace-1}},{key:"Right",value:function(){return this.secondRow[2]=this.secondRow[1],this.secondRow[1]=this.secondRow[0],this.secondRow[0]=7-this.secondRow[2],this.diceFace=this.secondRow[1],this.diceFace-1}},{key:"setDiceFaces",value:function(){return[this.secondRow[2],this.secondRow[0],this.thirdRow[1],this.firstRow[1]].map(String)}},{key:"getDiceFace",value:function(){return this.diceFace}}]),e}();t.exports=o,cc._RF.pop()},{}],Map:[function(e,t,i){"use strict";cc._RF.push(t,"dcb8el0DwdBXoY1UqkiB8q1","Map");var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();e("./CheckValue.js");function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;s(this,e),this.rows=i,this.cols=t,this.wallLeft=[],this.wallRight=[],this.wallTop=[],this.wallBottom=[],this.destination=[5,5],this.start=[0,0]}return n(e,[{key:"setWall",value:function(e,t){var i,n=this,s=[];if(e.forEach(function(e){if(!n.checkPosition(e[0],e[1]))return!1;s.push(e)}),"left"==t)(i=this.wallLeft).push.apply(i,s),s.forEach(function(e){n.checkPosition(e[0],e[1]-1)&&n.wallRight.push([e[0],e[1]-1])});else if("right"==t){var o;(o=this.wallRight).push.apply(o,s),s.forEach(function(e){n.checkPosition(e[0],e[1]+1)&&n.wallLeft.push([e[0],e[1]+1])})}else if("top"==t){var r;(r=this.wallTop).push.apply(r,s),s.forEach(function(e){n.checkPosition(e[0]-1,e[1])&&n.wallBottom.push([e[0]-1,e[1]])})}else{if("bottom"!=t)return!1;var c;(c=this.wallBottom).push.apply(c,s),s.forEach(function(e){n.checkPosition(e[0]+1,e[1])&&n.wallTop.push([e[0]+1,e[1]])})}return!0}},{key:"checkPosition",value:function(e,t){return e>=0&&t>=0&&e<this.cols&&t<this.rows}},{key:"setDestination",value:function(e,t){return!!this.checkPosition(t,e)&&(this.destination=[e,t],!0)}},{key:"setStart",value:function(e,t){return!!this.checkPosition(t,e)&&(this.start=[e,t],!0)}}]),e}();t.exports=o,cc._RF.pop()},{"./CheckValue.js":"CheckValue"}],gameController:[function(e,t,i){"use strict";cc._RF.push(t,"ba0e2Qxs25Pgqrm265h5PbB","gameController");var n=e("Map"),s=1,o=2,r=3,c=4;cc.Class({extends:cc.Component,properties:{map:cc.Node,diceController:cc.Node,btnHolder:cc.Node,moves:cc.Label,diceFace:{type:[cc.Label],default:[]}},onLoad:function(){this.log(),this.countMove=16,this.diceController.zIndex=999,this.tilesMap=this.map.getComponent("MapController").tiles,this.setupDice(),this.posStart=null,this.dice=this.diceController.getComponent("DiceController"),this.moves.getComponent(cc.Label).string="Moves: "+this.countMove},start:function(){},log:function(){this.newMap=new n,this.newMap.setWall([[0,5]],"left"),this.newMap.setWall([[3,0],[3,1]],"right"),this.newMap.setWall([[3,0],[3,1]],"top"),this.newMap.setWall([[4,0],[4,1]],"bottom"),this.newMap.setStart(3,0),this.newMap.setDestination(0,5),this.posStart=this.map.getComponent("MapController").renderMap(this.newMap)},setupDice:function(){this.diceController.position=this.tilesMap[this.posStart[0]][this.posStart[1]].position,this.currentDicePos={row:this.posStart[0],col:this.posStart[1]}},moveDice:function(e,t){var i=this;if(!this.isMovingDice){this.btnHolder.active=!1;var n=this.currentDicePos.col,a=this.currentDicePos.row;switch(Number(t)){case s:n>0&&(n-=1,this.dice.Left());break;case o:n<this.newMap.cols-1&&(n+=1,this.dice.Right());break;case r:a>0&&(a-=1,this.dice.Up());break;case c:a<this.newMap.rows-1&&(a+=1,this.dice.Down())}if(this.currentDicePos={row:a,col:n},this.isMovingDice=!0,-1<a<this.newMap.rows&&-1<n<this.newMap.cols){var l=this.tilesMap[a][n].position;l?this.diceController.runAction(cc.sequence(cc.moveTo(.3,l),cc.callFunc(function(){i.countMove--,i.moves.getComponent(cc.Label).string="Moves: "+i.countMove,0===a&&5===n&&6===i.dice.getDiceFace()?(alert("You Win"),i.diceController.active=!1):(0===a&&5===n&&6!=i.dice.getDiceFace()||0===i.countMove)&&(alert("you lose"),i.diceController.active=!1),i.isMovingDice=!1}))):cc.error("\xf4 tr\xean kh\xf4ng h\u1ee3p l\u1ec7.")}}},showBtnDirection:function(){this.btnHolder.active=!0,this.btnHolder.emit("UPDATE_BTN_CONTROLLER",this.currentDicePos,this.newMap.cols,this.newMap.rows,this.newMap),this.onDiceFaces()},onDiceFaces:function(){var e=this;this.diceFace=this.dice.getDiceFaces().map(function(t,i){e.btnHolder.emit("UPDATE_DICE_NUMBER",t,i+1)})}}),cc._RF.pop()},{Map:"Map"}],levelController:[function(e,t,i){"use strict";cc._RF.push(t,"9cc31tF6a1C248VePDgXT98","levelController");e("mEmitter");cc.Class({extends:cc.Component,properties:{startScreen:cc.Node},onBack:function(){this.node.active=!1,this.startScreen.active=!0}}),cc._RF.pop()},{mEmitter:"mEmitter"}],level:[function(e,t,i){"use strict";cc._RF.push(t,"2436djvFsNB3puKvet7wqj9","level");var n=e("mEmitter");cc.Class({extends:cc.Component,properties:{levelLock:cc.SpriteFrame,levelUnlock:cc.SpriteFrame},start:function(){n.instance.registerEvent("COMPLETE_LEVEL",this.onCompleteLevel.bind(this))},selectedLevel:function(){if(this.node.children[0].active){var e=this.node.name;n.instance.emit("SELECTED_LEVEL",e)}},onCompleteLevel:function(e){e.levelUnlock==this.node.name&&(this.node.children[0].active=!0,this.node.getComponent(cc.Sprite)._spriteFrame=this.levelUnlock)}}),cc._RF.pop()},{mEmitter:"mEmitter"}],loginController:[function(e,t,i){"use strict";cc._RF.push(t,"bb3cfB7p5VH8pXQ2XkmMdjv","loginController"),cc.Class({extends:cc.Component,properties:{nameEditBox:cc.EditBox,playButton:cc.Button,settingButton:cc.Button,settingPage:cc.Layout},onLoad:function(){},start:function(){},onSubmit:function(){this.player={namePlayer:this.nameEditBox.string},cc.log(this.player)},onShowSettingPage:function(){this.nameEditBox.enabled=!1,this.node.opacity=108,this.settingPage.node.active=!0},onHideSettingPage:function(){this.nameEditBox.enabled=!0,this.settingPage.node.active=!1,this.node.opacity=255}}),cc._RF.pop()},{}],mEmitter:[function(e,t,i){"use strict";cc._RF.push(t,"69556ja+GpMF7edM7x7RE0/","mEmitter");var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=e("events"),r=function(){function e(){s(this,e),this._emiter=new o,this._emiter.setMaxListeners(100)}return n(e,[{key:"emit",value:function(){var e;(e=this._emiter).emit.apply(e,arguments)}},{key:"registerEvent",value:function(e,t){this._emiter.on(e,t)}},{key:"registerOnce",value:function(e,t){this._emiter.once(e,t)}},{key:"removeEvent",value:function(e,t){this._emiter.removeListener(e,t)}},{key:"destroy",value:function(){this._emiter.removeAllListeners(),this._emiter=null,e.instance=null}}]),e}();r.instance=null,t.exports=r,cc._RF.pop()},{events:1}],mainController:[function(e,t,i){"use strict";cc._RF.push(t,"f8066Qnw9pNJJIfRH7tdRz3","mainController");var n=e("mEmitter");cc.Class({extends:cc.Component,properties:{levelScreen:cc.Node,gameScreen:cc.Node,musicSlider:cc.Slider,musicSliderPrefab:cc.Slider,musicAudio:cc.AudioSource},onLoad:function(){n.instance=new n,n.instance.registerEvent("SELECTED_LEVEL",this.onSelectedLevel.bind(this)),n.instance.registerEvent("COMPLETE_LEVEL",this.onUnlockNextLevel.bind(this)),n.instance.registerEvent("musicVolumeChanged",this.onReceiveChangeMusic.bind(this)),n.instance.registerEvent("musicVolumeChangedFromScript2",this.onChangeMusic.bind(this))},onSelectedLevel:function(e){this.levelScreen.active=!1,this.gameScreen.getComponent("gameController")._level=e,this.gameScreen.active=!0;for(var t=this.gameScreen.children.length,i=0;i<t;i++){this.gameScreen.children[i]._name==e&&(this.gameScreen.children[i].active=!0)}},onUnlockNextLevel:function(){this.gameScreen.active=!1,this.levelScreen.active=!0},onChangeMusic:function(e){this.musicSliderPrefab.progress=e,this.musicAudio.volume=e,cc.log("Received music volume change from script 1:",e)},onReceiveChangeMusic:function(e){this.musicSlider.progress=e,this.musicAudio.volume=e,cc.log("Received music volume change from script 2:",e)}}),cc._RF.pop()},{mEmitter:"mEmitter"}],pausePageController:[function(e,t,i){"use strict";cc._RF.push(t,"5299e7a7HlCp5LOSe4Kyrmr","pausePageController");var n=e("mEmitter");cc.Class({extends:cc.Component,properties:{playButton:cc.Button,backButton:cc.Button,soundSliderPrefab:cc.Slider,musicSliderPrefab:cc.Slider,LoginPage:cc.Layout,musicAudio:cc.AudioSource},onLoad:function(){this.musicSliderPrefab.node.on("slide",this.onSendMusicSliderChange,this)},start:function(){},onBack:function(){this.node.active=!1},onSendMusicSliderChange:function(e){var t=e.progress;this.musicAudio.volume=t,n.instance.emit("musicVolumeChanged",t)}}),cc._RF.pop()},{mEmitter:"mEmitter"}],settingController:[function(e,t,i){"use strict";cc._RF.push(t,"f1ed86nuC5Kh43SoiJOtG9s","settingController");var n=e("mEmitter");cc.Class({extends:cc.Component,properties:{musicSlider:cc.Slider,soundSlider:cc.Slider,musicAudio:cc.AudioSource,loginPage:cc.Layout,pausePage:cc.Layout},onLoad:function(){this.musicSlider.node.on("slide",this.onSendMusicSliderChange,this)},start:function(){},onBack:function(){this.node.active=!1,this.loginPage.node.active=!0},onPauseButtonBoard:function(){this.pausePage.node.active=!0},onSendMusicSliderChange:function(e){var t=e.progress;this.musicAudio.volume=t,n.instance.emit("musicVolumeChangedFromScript2",t)}}),cc._RF.pop()},{mEmitter:"mEmitter"}]},{},["BtnDirection","CheckValue","DiceController","Map","MapController","MapDice","gameController","level","levelController","loginController","mEmitter","mainController","pausePageController","settingController"]);